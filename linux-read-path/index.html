<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Read syscall implementation in Linux Kernel - Xing Lin</title><meta name="Description" content="Read path in the Linux kernel"><meta property="og:title" content="Read syscall implementation in Linux Kernel" />
<meta property="og:description" content="Read path in the Linux kernel" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xinglin.github.io/linux-read-path/" /><meta property="og:image" content="https://xinglin.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-16T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-05-28T11:36:16-07:00" /><meta property="og:site_name" content="Xing Lin" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://xinglin.github.io/logo.png"/>

<meta name="twitter:title" content="Read syscall implementation in Linux Kernel"/>
<meta name="twitter:description" content="Read path in the Linux kernel"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://xinglin.github.io/linux-read-path/" /><link rel="prev" href="https://xinglin.github.io/reinvent2018-tidbits/" /><link rel="next" href="https://xinglin.github.io/making-databases-work/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Read syscall implementation in Linux Kernel",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/xinglin.github.io\/linux-read-path\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/xinglin.github.io\/images\/Apple-Devices-Preview.png",
                            "width":  3200 ,
                            "height":  2048 
                        }],"genre": "posts","keywords": "engineering, linux, source code","wordcount":  1214 ,
        "url": "https:\/\/xinglin.github.io\/linux-read-path\/","datePublished": "2019-01-16T00:00:00+00:00","dateModified": "2022-05-28T11:36:16-07:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/xinglin.github.io\/images\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "Xing Lin"
            },"description": "Read path in the Linux kernel"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Xing Lin">Hello, World</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/publications/"> Publications </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="https://github.com/xinglin" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Xing Lin">Hello, World</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/publications/" title="">Publications</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="https://github.com/xinglin" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Read syscall implementation in Linux Kernel</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Xing Lin</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2019-01-16">2019-01-16</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1214 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;6 minutes&nbsp;<span id="/linux-read-path/" class="leancloud_visitors" data-flag-title="Read syscall implementation in Linux Kernel">
                        <i class="far fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;views
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#interactions-among-vfs-page-cache-and-ext2-on-serving-a-read-request">Interactions among vfs, page cache, and ext2 on serving a read request</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h3 id="interactions-among-vfs-page-cache-and-ext2-on-serving-a-read-request">Interactions among vfs, page cache, and ext2 on serving a read request</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="../sysread.png"
        data-srcset="../sysread.png, ../sysread.png 1.5x, ../sysread.png 2x"
        data-sizes="auto"
        alt="../sysread.png"
        title="../sysread.png" /></p>
<h1 id="stack-trace-for-ext2_readpages-in-ext2">stack trace for ext2_readpages() in ext2</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[   84.037457] Call Trace:
</span></span><span class="line"><span class="cl">[   84.037458]  dump_stack+0x46/0x5b
</span></span><span class="line"><span class="cl">[   84.037460]  ext2_readpages+0x3e/0x90
</span></span><span class="line"><span class="cl">[   84.037464]  read_pages+0x71/0x1a0
</span></span><span class="line"><span class="cl">[   84.037470]  ? __do_page_cache_readahead+0x1c9/0x1e0
</span></span><span class="line"><span class="cl">[   84.037472]  __do_page_cache_readahead+0x1c9/0x1e0
</span></span><span class="line"><span class="cl">[   84.037474]  ondemand_readahead+0x171/0x2b0
</span></span><span class="line"><span class="cl">[   84.037478]  ? pagecache_get_page+0x30/0x2c0
</span></span><span class="line"><span class="cl">[   84.037481]  ? __kernel_text_address+0xe/0x30
</span></span><span class="line"><span class="cl">[   84.037483]  generic_file_read_iter+0x875/0xda0
</span></span><span class="line"><span class="cl">[   84.037412]  ext2_file_read_iter+0x4c/0xe0
</span></span><span class="line"><span class="cl">[   84.037488]  new_sync_read+0x12e/0x1d0
</span></span><span class="line"><span class="cl">[   84.037490]  vfs_read+0x91/0x130
</span></span><span class="line"><span class="cl">[   84.037492]  ksys_read+0x52/0xc0
</span></span><span class="line"><span class="cl">[   84.037494]  do_syscall_64+0x4f/0x100
</span></span><span class="line"><span class="cl">[   84.037496]  entry_SYSCALL_64_after_hwframe+0x44/0xa9
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[   84.037379] Call Trace:
</span></span><span class="line"><span class="cl">[   84.037405]  dump_stack+0x46/0x5b
</span></span><span class="line"><span class="cl">[   84.037412]  ext2_file_read_iter+0x4c/0xe0
</span></span><span class="line"><span class="cl">[   84.037419]  new_sync_read+0x12e/0x1d0
</span></span><span class="line"><span class="cl">[   84.037426]  vfs_read+0x91/0x130
</span></span><span class="line"><span class="cl">[   84.037428]  ksys_read+0x52/0xc0
</span></span><span class="line"><span class="cl">[   84.037431]  do_syscall_64+0x4f/0x100
</span></span><span class="line"><span class="cl">[   84.037438]  entry_SYSCALL_64_after_hwframe+0x44/0xa9
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="readwrite-syscall-definitions">read/write syscall definitions</h1>
<p>read/write syscalls are defined in fs/read_write.c, as following.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">SYSCALL_DEFINE3(read, unsigned int, fd, char __user *, buf, size_t, count)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">	return ksys_read(fd, buf, count);
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">SYSCALL_DEFINE3(write, unsigned int, fd, const char __user *, buf,
</span></span><span class="line"><span class="cl">		size_t, count)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">	return ksys_write(fd, buf, count);
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="read-syscall-call-stack">Read syscall call stack</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ksys_read(fd, buf, count);
</span></span><span class="line"><span class="cl">  vfs_read(f.file, buf, count, &amp;pos);
</span></span><span class="line"><span class="cl">    __vfs_read(file, buf, count, pos);
</span></span><span class="line"><span class="cl">    	if (file-&gt;f_op-&gt;read)
</span></span><span class="line"><span class="cl">		return file-&gt;f_op-&gt;read(file, buf, count, pos);
</span></span><span class="line"><span class="cl">	else if (file-&gt;f_op-&gt;read_iter)
</span></span><span class="line"><span class="cl">		return new_sync_read(file, buf, count, pos);
</span></span><span class="line"><span class="cl">	else
</span></span><span class="line"><span class="cl">		return -EINVAL;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/* Take ext2 as an example. ext2 does not define read() but defines read_iter(). */
</span></span><span class="line"><span class="cl">const struct file_operations ext2_file_operations = {
</span></span><span class="line"><span class="cl">	.llseek		= generic_file_llseek,
</span></span><span class="line"><span class="cl">	.read_iter	= ext2_file_read_iter,
</span></span><span class="line"><span class="cl">	.write_iter	= ext2_file_write_iter,
</span></span><span class="line"><span class="cl">	.unlocked_ioctl = ext2_ioctl,
</span></span><span class="line"><span class="cl">#ifdef CONFIG_COMPAT
</span></span><span class="line"><span class="cl">	.compat_ioctl	= ext2_compat_ioctl,
</span></span><span class="line"><span class="cl">#endif
</span></span><span class="line"><span class="cl">	.mmap		= ext2_file_mmap,
</span></span><span class="line"><span class="cl">	.open		= dquot_file_open,
</span></span><span class="line"><span class="cl">	.release	= ext2_release_file,
</span></span><span class="line"><span class="cl">	.fsync		= ext2_fsync,
</span></span><span class="line"><span class="cl">	.get_unmapped_area = thp_get_unmapped_area,
</span></span><span class="line"><span class="cl">	.splice_read	= generic_file_splice_read,
</span></span><span class="line"><span class="cl">	.splice_write	= iter_file_splice_write,
</span></span><span class="line"><span class="cl">};
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">new_sync_read()
</span></span><span class="line"><span class="cl">  call_read_iter(filp, &amp;kiocb, &amp;iter);
</span></span><span class="line"><span class="cl">    file-&gt;f_op-&gt;read_iter(kio, iter);
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="ext2_file_read_iter">ext2_file_read_iter()</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ext2_file_read_iter(): ext2_file_operations.read_iter
</span></span><span class="line"><span class="cl">  generic_file_read_iter()
</span></span><span class="line"><span class="cl">    generic_file_buffered_read()
</span></span><span class="line"><span class="cl">      find_get_page()
</span></span><span class="line"><span class="cl">      page_cache_sync_readahead()
</span></span><span class="line"><span class="cl">      or page_cache_async_readahead()
</span></span><span class="line"><span class="cl">        ondemand_readahead()
</span></span><span class="line"><span class="cl">          __do_page_cache_readahead()
</span></span><span class="line"><span class="cl">            read_pages()
</span></span><span class="line"><span class="cl">              mapping-&gt;a_ops-&gt;readpages(filp, mapping, pages, nr_pages);
</span></span><span class="line"><span class="cl">              or mapping-&gt;a_ops-&gt;readpage(filp, page);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/* ext2 defines both readpage() and readpages(). */
</span></span><span class="line"><span class="cl">const struct address_space_operations ext2_aops = {
</span></span><span class="line"><span class="cl">	.readpage		= ext2_readpage,
</span></span><span class="line"><span class="cl">	.readpages		= ext2_readpages,
</span></span><span class="line"><span class="cl">	.writepage		= ext2_writepage,
</span></span><span class="line"><span class="cl">	.write_begin		= ext2_write_begin,
</span></span><span class="line"><span class="cl">	.write_end		= ext2_write_end,
</span></span><span class="line"><span class="cl">	.bmap			= ext2_bmap,
</span></span><span class="line"><span class="cl">	.direct_IO		= ext2_direct_IO,
</span></span><span class="line"><span class="cl">	.writepages		= ext2_writepages,
</span></span><span class="line"><span class="cl">	.migratepage		= buffer_migrate_page,
</span></span><span class="line"><span class="cl">	.is_partially_uptodate	= block_is_partially_uptodate,
</span></span><span class="line"><span class="cl">	.error_remove_page	= generic_error_remove_page,
</span></span><span class="line"><span class="cl">};
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/* The IO request is submitted to the block layer by calling mpage_bio_submit(). */
</span></span><span class="line"><span class="cl">ext2_readpages()
</span></span><span class="line"><span class="cl">    mpage_readpages()
</span></span><span class="line"><span class="cl">        mpage_bio_submit()
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/*
</span></span><span class="line"><span class="cl"> * __do_page_cache_readahead() actually reads a chunk of disk.  It allocates
</span></span><span class="line"><span class="cl"> * the pages first, then submits them for I/O. This avoids the very bad
</span></span><span class="line"><span class="cl"> * behaviour which would occur if page allocations are causing VM writeback.
</span></span><span class="line"><span class="cl"> * We really don&#39;t want to intermingle reads and writes like that.
</span></span><span class="line"><span class="cl"> *
</span></span><span class="line"><span class="cl"> * Returns the number of pages requested, or the maximum amount of I/O allowed.
</span></span><span class="line"><span class="cl"> */
</span></span><span class="line"><span class="cl">unsigned int __do_page_cache_readahead(struct address_space *mapping,
</span></span><span class="line"><span class="cl">		struct file *filp, pgoff_t offset, unsigned long nr_to_read,
</span></span><span class="line"><span class="cl">		unsigned long lookahead_size)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">    ...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	/*
</span></span><span class="line"><span class="cl">	 * Preallocate as many pages as we will need.
</span></span><span class="line"><span class="cl">	 */
</span></span><span class="line"><span class="cl">	for (page_idx = 0; page_idx &lt; nr_to_read; page_idx++) {
</span></span><span class="line"><span class="cl">		pgoff_t page_offset = offset + page_idx;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		if (page_offset &gt; end_index)
</span></span><span class="line"><span class="cl">			break;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		page = xa_load(&amp;mapping-&gt;i_pages, page_offset);
</span></span><span class="line"><span class="cl">		if (page &amp;&amp; !xa_is_value(page)) {
</span></span><span class="line"><span class="cl">			/*
</span></span><span class="line"><span class="cl">			 * Page already present?  Kick off the current batch of
</span></span><span class="line"><span class="cl">			 * contiguous pages before continuing with the next
</span></span><span class="line"><span class="cl">			 * batch.
</span></span><span class="line"><span class="cl">			 */
</span></span><span class="line"><span class="cl">			if (nr_pages)
</span></span><span class="line"><span class="cl">				read_pages(mapping, filp, &amp;page_pool, nr_pages,
</span></span><span class="line"><span class="cl">						gfp_mask);
</span></span><span class="line"><span class="cl">			nr_pages = 0;
</span></span><span class="line"><span class="cl">			continue;
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		page = __page_cache_alloc(gfp_mask);
</span></span><span class="line"><span class="cl">		if (!page)
</span></span><span class="line"><span class="cl">			break;
</span></span><span class="line"><span class="cl">		page-&gt;index = page_offset;
</span></span><span class="line"><span class="cl">		list_add(&amp;page-&gt;lru, &amp;page_pool);
</span></span><span class="line"><span class="cl">		if (page_idx == nr_to_read - lookahead_size)
</span></span><span class="line"><span class="cl">			SetPageReadahead(page);
</span></span><span class="line"><span class="cl">		nr_pages++;
</span></span><span class="line"><span class="cl">	}  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	/*
</span></span><span class="line"><span class="cl">	 * Now start the IO.  We ignore I/O errors - if the page is not
</span></span><span class="line"><span class="cl">	 * uptodate then the caller will launch readpage again, and
</span></span><span class="line"><span class="cl">	 * will then handle the error.
</span></span><span class="line"><span class="cl">	 */
</span></span><span class="line"><span class="cl">	if (nr_pages)
</span></span><span class="line"><span class="cl">		read_pages(mapping, filp, &amp;page_pool, nr_pages, gfp_mask);
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">static int read_pages(struct address_space *mapping, struct file *filp,
</span></span><span class="line"><span class="cl">		struct list_head *pages, unsigned int nr_pages, gfp_t gfp)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">	struct blk_plug plug;
</span></span><span class="line"><span class="cl">	unsigned page_idx;
</span></span><span class="line"><span class="cl">	int ret;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	blk_start_plug(&amp;plug);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	if (mapping-&gt;a_ops-&gt;readpages) {
</span></span><span class="line"><span class="cl">		ret = mapping-&gt;a_ops-&gt;readpages(filp, mapping, pages, nr_pages);
</span></span><span class="line"><span class="cl">		/* Clean up the remaining pages */
</span></span><span class="line"><span class="cl">		put_pages_list(pages);
</span></span><span class="line"><span class="cl">		goto out;
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	for (page_idx = 0; page_idx &lt; nr_pages; page_idx++) {
</span></span><span class="line"><span class="cl">		struct page *page = lru_to_page(pages);
</span></span><span class="line"><span class="cl">		list_del(&amp;page-&gt;lru);
</span></span><span class="line"><span class="cl">		if (!add_to_page_cache_lru(page, mapping, page-&gt;index, gfp))
</span></span><span class="line"><span class="cl">			mapping-&gt;a_ops-&gt;readpage(filp, page);
</span></span><span class="line"><span class="cl">		put_page(page);
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">	ret = 0;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">out:
</span></span><span class="line"><span class="cl">	blk_finish_plug(&amp;plug);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	return ret;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="io-path-from-understanding-the-linux-kernel">IO Path from Understanding the Linux Kernel</h1>
<p>The following explanation is from the book, Understanding the Linux Kernel. It seems that the implementions of Linux VFS and specific filesystems have evolved that the explanation from the book is not accurate.</p>
<p>In Linux, when a file is opened by a process, its file object will be added to the process control block (struct task_struct). The process control block has a pointer, struct files_struct* files, to keep track of all opened files. Within the files_struct, there exists struct fdtable, storing file objects for all file descriptors. A file descriptor is an index into this file object array of type struct file. Each file object (struct file) has a pointer to a file operations object (struct file_operations), to invoke file system specific operations for that file.</p>
<p>When a read() is called from the process for a file descriptor, it will invoke the sys_read(), which calls the read() operation for that file object (file-&gt;f_op-&gt;read(&hellip;)).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">struct task_struct {
</span></span><span class="line"><span class="cl">	...
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	/* Open file information: */
</span></span><span class="line"><span class="cl">	struct files_struct		*files;
</span></span><span class="line"><span class="cl">};
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/*
</span></span><span class="line"><span class="cl"> * Open file table structure
</span></span><span class="line"><span class="cl"> */
</span></span><span class="line"><span class="cl">struct files_struct {
</span></span><span class="line"><span class="cl">  /*
</span></span><span class="line"><span class="cl">   * read mostly part
</span></span><span class="line"><span class="cl">   */
</span></span><span class="line"><span class="cl">	atomic_t count;
</span></span><span class="line"><span class="cl">	bool resize_in_progress;
</span></span><span class="line"><span class="cl">	wait_queue_head_t resize_wait;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	struct fdtable __rcu *fdt;
</span></span><span class="line"><span class="cl">	struct fdtable fdtab;
</span></span><span class="line"><span class="cl">  /*
</span></span><span class="line"><span class="cl">   * written part on a separate cache line in SMP
</span></span><span class="line"><span class="cl">   */
</span></span><span class="line"><span class="cl">	spinlock_t file_lock ____cacheline_aligned_in_smp;
</span></span><span class="line"><span class="cl">	unsigned int next_fd;
</span></span><span class="line"><span class="cl">	unsigned long close_on_exec_init[1];
</span></span><span class="line"><span class="cl">	unsigned long open_fds_init[1];
</span></span><span class="line"><span class="cl">	unsigned long full_fds_bits_init[1];
</span></span><span class="line"><span class="cl">	struct file __rcu * fd_array[NR_OPEN_DEFAULT];
</span></span><span class="line"><span class="cl">};
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">struct fdtable {
</span></span><span class="line"><span class="cl">	unsigned int max_fds;
</span></span><span class="line"><span class="cl">	struct file __rcu **fd;      /* current fd array */
</span></span><span class="line"><span class="cl">	unsigned long *close_on_exec;
</span></span><span class="line"><span class="cl">	unsigned long *open_fds;
</span></span><span class="line"><span class="cl">	unsigned long *full_fds_bits;
</span></span><span class="line"><span class="cl">	struct rcu_head rcu;
</span></span><span class="line"><span class="cl">};
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">struct file {
</span></span><span class="line"><span class="cl">	union {
</span></span><span class="line"><span class="cl">		struct llist_node	fu_llist;
</span></span><span class="line"><span class="cl">		struct rcu_head 	fu_rcuhead;
</span></span><span class="line"><span class="cl">	} f_u;
</span></span><span class="line"><span class="cl">	struct path		f_path;
</span></span><span class="line"><span class="cl">	struct inode		*f_inode;	/* cached value */
</span></span><span class="line"><span class="cl">	const struct file_operations	*f_op;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	/*
</span></span><span class="line"><span class="cl">	 * Protects f_ep_links, f_flags.
</span></span><span class="line"><span class="cl">	 * Must not be taken from IRQ context.
</span></span><span class="line"><span class="cl">	 */
</span></span><span class="line"><span class="cl">	spinlock_t		f_lock;
</span></span><span class="line"><span class="cl">	enum rw_hint		f_write_hint;
</span></span><span class="line"><span class="cl">	atomic_long_t		f_count;
</span></span><span class="line"><span class="cl">	unsigned int 		f_flags;
</span></span><span class="line"><span class="cl">	fmode_t			f_mode;
</span></span><span class="line"><span class="cl">	struct mutex		f_pos_lock;
</span></span><span class="line"><span class="cl">	loff_t			f_pos;
</span></span><span class="line"><span class="cl">	struct fown_struct	f_owner;
</span></span><span class="line"><span class="cl">	const struct cred	*f_cred;
</span></span><span class="line"><span class="cl">	struct file_ra_state	f_ra;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	...
</span></span><span class="line"><span class="cl">} __randomize_layout
</span></span><span class="line"><span class="cl">  __attribute__((aligned(4)));	/* lest something weird decides that 2 is OK */
</span></span></code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2022-05-28</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/linux-read-path/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://xinglin.github.io/linux-read-path/" data-title="Read syscall implementation in Linux Kernel" data-hashtags="engineering,linux,source code"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://xinglin.github.io/linux-read-path/" data-hashtag="engineering"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://xinglin.github.io/linux-read-path/" data-title="Read syscall implementation in Linux Kernel"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://xinglin.github.io/linux-read-path/" data-title="Read syscall implementation in Linux Kernel"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@6.20.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://xinglin.github.io/linux-read-path/" data-title="Read syscall implementation in Linux Kernel"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/engineering/">engineering</a>,&nbsp;<a href="/tags/linux/">linux</a>,&nbsp;<a href="/tags/source-code/">source code</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/reinvent2018-tidbits/" class="prev" rel="prev" title="AWS re:Invent 2018 tidbits"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>AWS re:Invent 2018 tidbits</a>
            <a href="/making-databases-work/" class="next" rel="next" title="Wisdom from Michael Stonebraker">Wisdom from Michael Stonebraker<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.99.1">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Xing Lin</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/valine@1.4.18/dist/Valine.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.0/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{"valine":{"appId":"QGzwQXOqs5JOhN4RGPOkR2mR-MdYXbMMI","appKey":"WBmoGyJtbqUswvfLh6L8iEBr","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"en","pageSize":10,"placeholder":"Your comment ...","recordIP":true,"serverURLs":"https://leancloud.hugoloveit.com","visitor":true}},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.en","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
